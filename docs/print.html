<!DOCTYPE HTML>
<html lang="ru" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Лабораторный практикум STM32G4</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Введение (-)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="introduction/how_to_read.html"><strong aria-hidden="true">1.1.</strong> Как читать этот документ (v)</a></li><li class="chapter-item expanded "><a href="introduction/links.html"><strong aria-hidden="true">1.2.</strong> Источники и полезные ссылки (v)</a></li></ol></li><li class="chapter-item expanded "><a href="dev-tools.html"><strong aria-hidden="true">2.</strong> Настройка инструментов разработки (!)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="dev-tools/cudeIDE_install.html"><strong aria-hidden="true">2.1.</strong> Установка и настройка CubeIDE (!)</a></li><li class="chapter-item expanded "><a href="dev-tools/cudeIDE_new_project.html"><strong aria-hidden="true">2.2.</strong> Создание нового пустого проекта в CubeIDE (!)</a></li><li class="chapter-item expanded "><a href="dev-tools/cudeIDE_debug.html"><strong aria-hidden="true">2.3.</strong> Загрузка прошивки и основы отладки в CubeIDE (!)</a></li><li class="chapter-item expanded "><strong aria-hidden="true">2.4.</strong> Установка и настройка CubeMonitor ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">2.5.</strong> Основы отладки в CubeMonitor ( )</li></ol></li><li class="chapter-item expanded "><a href="theory.html"><strong aria-hidden="true">3.</strong> Теоретический материал (-!)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="theory/notations.html"><strong aria-hidden="true">3.1.</strong> Системы счисления (-!)</a></li><li class="chapter-item expanded "><a href="theory/C_logic_operations.html"><strong aria-hidden="true">3.2.</strong> Логические операции в Си (-!)</a></li><li class="chapter-item expanded "><a href="theory/C_macro.html"><strong aria-hidden="true">3.3.</strong> Основы макросов в Си (!)</a></li><li class="chapter-item expanded "><strong aria-hidden="true">3.4.</strong> Описание лабораторного стенда ( )</li></ol></li><li class="chapter-item expanded "><strong aria-hidden="true">4.</strong> Лабораторные работы ( )</li><li><ol class="section"><li class="chapter-item expanded "><a href="manual/GPIO.html"><strong aria-hidden="true">4.1.</strong> Порты ввода-вывода (!)</a></li><li class="chapter-item expanded "><strong aria-hidden="true">4.2.</strong> События и прерывания ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">4.3.</strong> Организация тактирования. Системный таймер ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">4.4.</strong> Таймеры №1. Настройка. Прерывание по переполнению, одноцикловый запуск ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">4.5.</strong> Таймеры №2. ШИМ, обработка энкодера, режим захвата ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">4.6.</strong> АЦП №1. Настройка. Обработка показаний по вызову ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">4.7.</strong> АЦП №2. DMA и классические каналы. Обработка показаний по вызову ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">4.8.</strong> АЦП №3. Инжектированные каналы. Синхронизация с таймером ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">4.9.</strong> АЦП №4. Оверсемплинг и фильтрация ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">4.10.</strong> Интерфейсы №1. UART ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">4.11.</strong> Интерфейсы №2. SPI ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">4.12.</strong> Интерфейсы №3. I2C ( )</li></ol></li><li class="chapter-item expanded "><strong aria-hidden="true">5.</strong> Куда двигаться дальше ( )</li><li class="chapter-item expanded "><strong aria-hidden="true">6.</strong> Для преподавателей ( )</li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Лабораторный практикум STM32G4</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#Введение--" id="Введение--">Введение (-)</a></h1>
<p>Это введение для методического пособия по разработке программного обеспечения для STM32 микроконтроллеров с использованием лабораторного стенда STM32. Данное методическое пособие является работой в процессе.</p>
<p>Для отслеживания прогресса используются обозначения:</p>
<ul>
<li>( ) - показывает, что работа над главой еще не начиналась;</li>
<li>(-) - показывает, что работа над главой уже начата, однако не завершена;</li>
<li>(v) - показывает, что работа над главой уже в большей мере завершена. Это не говорит о том, что в главе не может быть изменений/дополнений/улучшений, но говорит о том, что принципиальный вид главы закончен.</li>
</ul>
<p>Символ <strong>!</strong> в скобках показывает главу, работу над которой необходимо закончить перед отправкой методички студентам, и на первую концептуальную проверку.</p>
<p>Если вы перешли на эту страницу по сторонней ссылке, репозиторий проекта можно найти <a href="https://github.com/Trimple/stm32-stand-manual">тут</a>.</p>
<h1><a class="header" href="#Как-читать-этот-документ-v" id="Как-читать-этот-документ-v">Как читать этот документ (v)</a></h1>
<p>В начале данного методического пособия есть водные разделы: <a href="https://trimple.github.io/stm32-stand-manual/dev-tools.html">&quot;Настройка инструментов разработки&quot;</a> и <a href="https://trimple.github.io/stm32-stand-manual/theory.html">&quot;Теоретически материал&quot;</a> - которые содержат очень много полезной информации об установке и настройке необходимого для разработки ПО и базовым аспектам программирования на Си, важным именно для разработки программ под микроконтроллеры. Эта информация будет полезной как только начинающим изучение программирования микроконтроллеров STM32, так и людям, уже знакомым с вопросом и просто желающим освежить знания. Мы настоятельно рекомендуем пройтись по этим разделам перед тем, как начинать разбираться с лабораторными работами вне зависимости от того, являетесь ли вы <strong>студентом</strong>, <strong>преподавателем</strong> или <strong>самоучкой</strong>, желающим научиться программировать микроконтроллеры STM32.</p>
<p>Важно понимать, что программирование микроконтроллеров - это в первую очередь чтение официальной документации к выбранному устройству. Пользоваться официальной документацией на первых этапах может быть очень сложно и непривычно, потому что она довольно большая по размеру и написана исключительно на английском языке, но по мере продвижения по лабораторным работам это будет становиться все проще и проще. В разделе <a href="https://trimple.github.io/stm32-stand-manual/introduction/links.html">Источники и полезные ссылки</a> можно найти описание того, какие материалы могут пригодиться для изучения, а также то, где и как их можно найти для любого микроконтроллера STM32.</p>
<h2><a class="header" href="#Организация-лабораторных-работ" id="Организация-лабораторных-работ">Организация лабораторных работ</a></h2>
<p>Процесс обучения разбит на лабораторные работы. Каждая лабораторная работа описывает взаимодействие с какой-то конкретной периферией микроконтроллера. Для некоторых периферий, например таймеров, выделено несколько лабораторных работ для более глубокой проработки и изучения. Лабораторные могут различаться по количеству материала, то есть для освоения теоретического материала и выполнения задач в одних работах может понадобиться заметно больше времени, чем в других.</p>
<p>В начале каждой лабораторной работы присутствует теоретический материал, объясняющий самые важные моменты, необходимые для данной лабораторной работы. Везде, где это возможно, к таким материалам прилагается ссылка на официальную документацию. Эта методичка не является переводом документации и, соответственно, некоторые моменты могут быть опущены. Одной из основных целей этого методического пособия является выработка навыков по работе с официальной документацией, что может быть полезно в профессиональной карьере, даже если она не будет связана непосредственно с разработкой программного обеспечения для микроконтроллеров STM32. Желание почитать официальную документацию и разобраться с материалом самостоятельно - активно приветствуется. В тексте время от времени будут даваться ссылки на дополнительный материал, который стоит или можно изучить для лучшего понимания того или иного момента, но при этом содержащейся в методическом пособии информации должно хватить для решения приведенных заданий. После теоретического материала приведено несколько примеров исходного кода и набор задач к лабораторной работе. В каждой главе также даются усложненные задачи, для которых может понадобиться самостоятельный поиск дополнительной информации, чтение официальной документации или просто более глубокие знания в программировании на Си и умение придумывать алгоритмы. Для закрепления теоретического материала в конце каждой главы присутствуют контрольные вопросы. Знаком * выделены вопросы, ответы на которые не давались в теоретическом материале.</p>
<h2><a class="header" href="#Студентам" id="Студентам">Студентам</a></h2>
<p>Данное методическое пособие с первого взгляда может показаться очень объемным и страшным, но его совершенно не стоит бояться! Оно сделано специально чтобы научить программировать микроконтроллеры STM32 каждого желающего. </p>
<p>Методическое пособие подразумевает полную независимость от конкретного лекционного материала, соответственно, при должной усидчивости все задания можно сделать полностью самостоятельно. По этой же причине каждый преподаватель может строить учебный курс в соответствии с собственным видением вопроса. Перед выполнением необходимо уточнить у преподавателя, какие конкретно лабораторные работы будут выполняться, какие конкретно задачи необходимо решать и как будет производиться их оценка.</p>
<p>При выполнении лабораторных работ к ним стоит относиться последовательно: сначала читать теорию, потом смотреть примеры и только потом решать задачи. При этом задачи стоит выполнять по порядку, так как в общем случае их порядок отражает их сложность и решение первых задач помогает в решении последующих.</p>
<p>После завершения данного курса лабораторных работ вы все еще не будете профессионалом в вопросе программирования микроконтроллеров, но уже будете иметь неплохую базу знаний, с которой можно двигаться дальше. О том, как можно продолжать движение в направлении программирования микроконтроллеров, написано в главе <a href="introduction/">Куда двигаться дальше</a>.</p>
<h2><a class="header" href="#Преподавателям" id="Преподавателям">Преподавателям</a></h2>
<p>Данное методическое пособие разрабатывалось не под какой-то конкретный профиль или специальность. И даже не столько под конкретное оборудование (хотя, безусловно, при выполнении лабораторных работ подразумевается использование лабораторного стенда STM32G4, разработанного в БГУИР). Данное учебное пособие разрабатывалось для того, чтобы дать возможность всем желающим изучить программирование микроконтроллеров STM32 вне зависимости от наличия дорогостоящего оборудования и компонентов. Лабораторные работы и приведенные примеры могут быть адаптированы под большинство существующих семейств микроконтроллеров STM32, а в качестве элементной базы можно использовать самые обычные отладочные платы, провода и дискретные компоненты, установленные на макетных платах.</p>
<p>Лабораторные работы не разбиты на классические 15 вариантов. Вместо этого в каждой главе дан список базовых задач, которые стоит выполнить, чтобы разобраться с теоретическим материалом. Кроме этого для каждой темы есть усложненные задачи, для выполнения которых может понадобиться дополнительный поиск информации, чтение официальной документации или более углубленные знания в программировании на Си. При необходимости каждый преподаватель может составить собственные задания к лабораторным работам или использовать уже имеющиеся. </p>
<p>Мы не предлагаем конкретной системы оценки успеваемости, но предлагаем контрольные вопросы в конце каждой лабораторной работы. Также данный документ не дает конкретного алгоритма проведения лабораторных занятий.  Каждый преподаватель сам решает, как именно и по какому материалу он будет читать лекционный курс, а также как именно он будет использовать данный документ при проведении лабораторных работ. Наши общие рекомендации по построению курса лабораторных работ можно найти в разделе <a href="introduction/">для преподавателей</a>.</p>
<p>Для успешного обучения студентов важно, чтобы преподаватель хорошо понимал материал, с которым работает, а это значит, что каждому преподавателю стоит изучить данное методическое пособие и прорешать все имеющиеся в нем задания до начала учебных занятий. Даже если вы занимаетесь программированием микроконтроллеров очень давно, вы вероятно найдете в этом документе пару интересных для себя моментов или, возможно, сможете предложить пару исправлений или улучшений.</p>
<h2><a class="header" href="#Самоучкам-и-просто-интересующимся-темой" id="Самоучкам-и-просто-интересующимся-темой">Самоучкам и просто интересующимся темой</a></h2>
<p>Если ты попал в этот документ в поиске ответов на самые сокровенные вопросы вселенной, то вряд ли ты их тут найдешь. Но вот ответ на вопрос о том, как изучить основы программирования микроконтроллеров STM32, тут есть. Данный документ писался так, чтобы по возможности не быть привязанным к конкретному &quot;железу&quot; и курсу лекций.</p>
<p>Что понадобится для полностью самостоятельного изучения методического пособия:</p>
<ul>
<li>отладочная плата с микроконтроллером STM32 любого семейства (базовая версия курса рассчитана на G4, но в целом ни с одним другим семейством, кроме, возможно, F1, проблем быть не должно) с возможностью подключения проводов к ножкам микроконтроллера;</li>
<li>макетная плата, на которую можно было бы устанавливать дискретные компоненты: кнопки, светодиоды, потенциометры;</li>
<li>набор дискретных компонентов:
<ul>
<li>минимум 4 кнопки;</li>
<li>минимум 4 светодиода;</li>
<li>резисторы для ограничения тока светодиодов и подтяжек кнопок и интерфейсов;</li>
<li>минимум 2 потенциометра;</li>
</ul>
</li>
<li>набор соединительных проводов.</li>
</ul>
<p>Для изучения интерфейсов могут понадобиться:</p>
<ul>
<li>устройство, поддерживающее SPI;</li>
<li>устройство, поддерживающее I2C;</li>
<li>USB-UART переходник.</li>
</ul>
<p>По измерительным приборам для отладки может пригодиться мультиметр и логический анализатор, но если их нет - не большая беда.</p>
<p>В целом, это все, что нужно. Все описанное в этом документе программное обеспечение для разработки и отладки является бесплатным, как и данное методическое пособие. Соответственно, в самом экономичном варианте все необходимое для изучения можно приобрести примерно за 25-30$. Схемы подключения дискретных компонентов можно посмотреть на электрической схеме лабораторного стенда в главе <a href="introduction/">Описание лабораторного стенда</a>.</p>
<p>Самостоятельное изучение методического пособия стоит вести по возможности последовательно: сначала вводный и теоретический материал, потом лабораторные работы. В самостоятельном обучении очень важно научиться читать документацию, поэтому всю информацию, написанную в этом документе, стоит проверять по официальной документации, и, возможно, со временем данный документ станет тебе уже не нужным.</p>
<p>Самое главное - не бояться, в начале может быть сложно, но упорство гарантировано приведет к успеху. </p>
<p>После полного изучения данного документа ты все еще не будешь профессионалом в вопросе программирования микроконтроллеров, но уже будете иметь неплохую базу знаний, с которой можно двигаться дальше. О том, как можно продолжать движение в направлении программирования микроконтроллеров, написано в главе <a href="introduction/">Куда двигаться дальше</a>.</p>
<h1><a class="header" href="#Источники-и-полезные-ссылки-v" id="Источники-и-полезные-ссылки-v">Источники и полезные ссылки (v)</a></h1>
<h3><a class="header" href="#Официальная-документация" id="Официальная-документация">Официальная документация</a></h3>
<p>Ни одно методическое пособие не заменит официальной документации к микроконтроллерам. Процесс поиска и скачивания документации является довольно прямолинейным и не зависит от семейства и конкретного типа контроллера. Пройдем все этапы поиска документации на примере микроконтроллера STM32G474VE.</p>
<p><strong>Страница ST, описывающая все имеющиеся у них семейства микроконтроллеров</strong>: <a href="https://www.st.com/en/microcontrollers-microprocessors/stm32-32-bit-arm-cortex-mcus.html">ссылка</a> - эта страница может стать основной точкой для изучения возможностей различных семейств микроконтроллеров STM32. Отсюда можно перейти на страницу каждого отдельного семейства и посмотреть на доступные микроконтроллеры, их характеристики и особенности. Чтобы попасть на страницу микроконтроллера STM32G474VE, необходимо сначала перейти на страницу G4, после чего на страницу STM32G4*4, где надо найти интересующий нас микроконтроллер.</p>
<p><strong>Страница микроконтроллера STM32G474VE на сайте ST</strong>: <a href="https://www.st.com/content/st_com/en/products/microcontrollers-microprocessors/stm32-32-bit-arm-cortex-mcus/stm32-mainstream-mcus/stm32g4-series/stm32g4x4/stm32g474ve.html">ссылка</a> - тут можно найти довольно подробное описание возможностей конкретного микроконтроллера и список различных контроллеров по типу корпуса и диапазону рабочих температур. Кроме этого тут есть безумно полезная вкладка <strong>Resources</strong>, на которой есть очень большое количество полезной документации на микроконтроллер. </p>
<p>Из всего этого разнообразия различных статей, брошюр, презентаций и документов нам обязательно надо скачать:</p>
<p><strong>datasheet</strong>: <a href="https://www.st.com/resource/en/datasheet/stm32g474ve.pdf">ссылка</a> - документ, содержащий описание всех параметров микроконтроллера: различных напряжений и токов в различных режимах, соответствие ножек и периферийных функций, типы корпусов и многое многое другое. При программировании микроконтроллера данный документ всегда должен быть под рукой. Обычно данный документ пишется для конкретного типа микроконтроллеров, например STM32G474x.</p>
<p><strong>Reference manual</strong>: <a href="https://www.st.com/resource/en/reference_manual/dm00355726-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf">ссылка</a> - документ, содержащий описание имеющейся внутри микроконтроллера периферии о том, как с этим со всем можно работать. Обычно это документ очень большого размера, но этого совершенно не стоит бояться. Читать этот документ от начала и до конца не нужно, он используется скорее как справочник, когда нужно посмотреть как работать с какой-то конкретной частью микроконтроллера. Это наш основной документ. Он должен быть всегда открыт при программировании периферии микроконтроллера. Обычно данный документ пишется сразу на целое семейство или на несколько типов микроконтроллеров внутри семейства, например в нашем случае для STM32G4.</p>
<p><strong>Также может быть полезно скачать:</strong></p>
<p><strong>Programming manual</strong>: <a href="https://www.st.com/resource/en/programming_manual/dm00046982-stm32-cortexm4-mcus-and-mpus-programming-manual-stmicroelectronics.pdf">ссылка</a> - данный документ содержит описание периферии, обязательно содержащейся в каком-то конкретном ядре, то есть не зависящей от типа микроконтроллера, использующего данное ядро. Данная периферия может описывать системный таймер, работу с ускорителями различных вычислений (например с плавающей точкой) и другими аспектами довольно серьезной черной магии. Для описанных в этом документе лабораторных работ этот документ может не пригодиться, но очень важно знать о его существовании. Обычно пишется для ядра, в нашем случае для Cortex-M4.</p>
<h3><a class="header" href="#Где-можно-искать-ответы-на-возникающие-вопросы-если-в-документации-ничего-не-понятно-а-спросить-не-у-кого" id="Где-можно-искать-ответы-на-возникающие-вопросы-если-в-документации-ничего-не-понятно-а-спросить-не-у-кого">Где можно искать ответы на возникающие вопросы, если в документации ничего не понятно, а спросить не у кого:</a></h3>
<p><strong>Официальный форум ST</strong>: <a href="https://community.st.com/s/">ссылка</a> - тут можно найти ответы на множество вопросов по программированию микроконтроллеров STM и решение большого количества проблем, которые когда-то уже возникали у других людей. С очень большой вероятностью ваш вопрос, либо очень схожий, уже был задан на этом форуме. Если же нет, то вы всегда можете задать интересующий вас вопрос сами. Тут сидит довольно много людей и ответы получаются очень оперативно. Если вы видите вопрос, на который знаете ответ, не стесняйтесь помочь другим людям.</p>
<p>А также просто в интернете и на различных онлайн блогах/ресурсах типа habr.com.</p>
<h3><a class="header" href="#Полезная-литература" id="Полезная-литература">Полезная литература:</a></h3>
<p><strong>Цифровая схемотехника и архитектура компьютера</strong>: <a href="https://www.mips.com/downloads/digital-design-and-computer-architecture-russian-edition-second-edition/">ссылка</a> - очень качественный перевод американской книги, описывающий основы цифровой схемотехники и архитектуры вычислительных средств. Книга очень познавательная и интересная. В целом рекомендуется почитать всем хотя бы для общего развития. Для скачивания будет необходимо зарегистрироваться.</p>
<h1><a class="header" href="#Настройка-инструментов-разработки--" id="Настройка-инструментов-разработки--">Настройка инструментов разработки ( )</a></h1>
<h1><a class="header" href="#Установка-cubeide--" id="Установка-cubeide--">Установка CubeIDE ( )</a></h1>
<h1><a class="header" href="#Создание-нового-пустого-проекта-в-cubeide--" id="Создание-нового-пустого-проекта-в-cubeide--">Создание нового пустого проекта в CubeIDE ( )</a></h1>
<h1><a class="header" href="#Загрузка-прошивки-на-плату-и-основы-отладки-в-cubeide--" id="Загрузка-прошивки-на-плату-и-основы-отладки-в-cubeide--">Загрузка прошивки на плату и основы отладки в CubeIDE ( )</a></h1>
<h1><a class="header" href="#Теоретический-материал--" id="Теоретический-материал--">Теоретический материал (-)</a></h1>
<h1><a class="header" href="#Системы-счисления--" id="Системы-счисления--">Системы счисления (-)</a></h1>
<h3><a class="header" href="#Цифровые-и-аналоговые-значения" id="Цифровые-и-аналоговые-значения">Цифровые и аналоговые значения</a></h3>
<p>Микроконтроллеры являются <strong>цифровыми</strong> устройствами, это означает, что информация в них хранится и обрабатывается в цифровом, то есть дискретном виде. Дискретность подразумевает что существует минимальный шаг, разделяющий два соседних значения. Например для микроконтроллеров таким минимальным шагом является 1 бит, мы не можем хранить и обрабатывать в микроконтроллере информацию не кратную 1 биту. При этом правильный способ представления битов позволяет нам представлять в цифровом виде дробные числа, например 0.5 (немного подробнее об этом будет ниже).</p>
<p>Кроме цифровых существую <strong>аналоговые</strong> устройства, представляющие данные в аналоговом - непрерывном виде. Непрерывность означает что не существует минимального шага, на который могут отличаться два числа, то есть шаг может уменьшаться до бесконечно малого, но не равного 0. Примерами непрерывных величин являются многие физические параметры: напряжение, ток, температура, давление и многие другие.</p>
<h3><a class="header" href="#Понятие-системы-счисления" id="Понятие-системы-счисления">Понятие системы счисления</a></h3>
<p>Самой привычной для человека системой счисления является десятичная, от части это объясняется количеством пальцев на руке человека, благодаря чему становится гораздо проще учить считать маленьких детей. Данная система использует 10 цифр: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9. Из этих цифр в десятичной системе счисления можно построить любое, сколь угодно большое или маленькое число. Количество цифр в системе счисления называется <strong>основанием системы счисление</strong>. Соответственно десятичная система названа именно так, из-за того, что имеет основание 10. В теории можно построить систему счисления с любым основанием, так как результаты любых математических операций никак не зависят от используемой системы счисления, но на практике далеко не все системы являются целесообразными и полезными.</p>
<p>Рассмотрим несколько важных понятий применимых к любой системе счисления на примере десятичного числа \(8357 \). Это число можно представить как \( 8 \cdot 1000 + 3 \cdot 100 + 5 \cdot 10 + 7 \cdot 1 \) или \( 8 \cdot 10^{3} + 3 \cdot 10^{2} + 5 \cdot 10^{1} + 7 \cdot 10^{0} \). Позицию цифры в числе слева направо будем называть <strong>разрядом</strong>, например число \( 8357 \) имеет 5 во втором разряде и 8 в четвертом. числа 1, 10, 100, 1000 - <strong>&quot;веса&quot;</strong> соответственно 1, 2, 3 и 4 разрядов. Можно заметить, что каждый следующий разряд имеет &quot;вес&quot;, который в <em>основание системы счисления</em> раз больше предыдущего. </p>
<p><strong>N-разрядным десятичным числом</strong> называется число, которое может принимать одно из \( 10^{N} \) значений в интервале от \( 0 \) до \( (10^{N}-1) \), данный интервал называется <strong>диапазоном N-разрядного десятичного числа</strong>. Например, 4-разрядное десятичное число может принимать одно из 10000 значений от 0 до 9999. </p>
<p><strong>Важно понимать</strong>. <code>Если речь идет о N-разрядном числе, то в его записи всегда должны присутствовать именно N разрядов. Например, если рассматривать 24, как 2-разрядное десятичное число, то его запись не изменится. Если же рассматривать 24, как 3-разрядное или 4-разрядное десятичное число, то корректной записью будет 024 и 0024 соответственно. Понятие N-разрядного числа редко применяется к десятичным числам, но очень часто встречается при работе с двоичными и шестнадцатеричными.</code></p>
<p>Любое N-разрядное число в любой системе счисления можно представить в следующе виде:</p>
<p>\[ \begin{equation} число = \sum_{k=1}^{N}(число\, в\, разряде\, k)\cdot(основание\, системы\, счисления)^{k-1} \end{equation} \]</p>
<hr />
<h3><a class="header" href="#Двоичная-шестнадцатеричная-системы-счисления" id="Двоичная-шестнадцатеричная-системы-счисления">Двоичная шестнадцатеричная системы счисления</a></h3>
<p><strong>Двоичное</strong> число может принимать значения 0 или 1. Разряды в двоичных числах иногда называют битами. Соответственно &quot;вес&quot; соседних битов двоичного числа отличается в 2 раза. Работая с двоичными числами очень полезно для экономии времени запомнить значения степеней числа 2 до 16 разряда, то есть: 1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536. Именно в двоичной системе счисления работают все современные цифровые устройства, при этом эти устройства могут быть 32, 64 или даже 128-разрядными. Под разрядностью устройства подразумевается разрядность двоичных чисел, для работы с которыми разрабатывалось данное устройство. Соответственно 32-разрядные процессоры (например все процессоры STM32) работают с 32-разрядными двоичными числами. Понятие &quot;работают&quot; с числами станет более понятно по мере изучения внутреннего устройства микроконтроллера. Соответственно для представления 32 ра</p>
<p><strong>Шестнадцатеричное</strong> число может принимать значения </p>
<p>Данную таблицу стоит выучить, так как это поможет в переводе между двоичной и шестнадцатеричной системами счисления.</p>
<table><thead><tr><th align="center">Двоичная</th><th align="center">Шестнадцатеричная</th><th align="center">Десятичная</th></tr></thead><tbody>
<tr><td align="center">0000</td><td align="center">0</td><td align="center">0</td></tr>
<tr><td align="center">0001</td><td align="center">1</td><td align="center">1</td></tr>
<tr><td align="center">0010</td><td align="center">2</td><td align="center">2</td></tr>
<tr><td align="center">0011</td><td align="center">3</td><td align="center">3</td></tr>
<tr><td align="center">0100</td><td align="center">4</td><td align="center">4</td></tr>
<tr><td align="center">0101</td><td align="center">5</td><td align="center">5</td></tr>
<tr><td align="center">0110</td><td align="center">6</td><td align="center">6</td></tr>
<tr><td align="center">0111</td><td align="center">7</td><td align="center">7</td></tr>
<tr><td align="center">1000</td><td align="center">8</td><td align="center">8</td></tr>
<tr><td align="center">1001</td><td align="center">9</td><td align="center">9</td></tr>
<tr><td align="center">1010</td><td align="center">A</td><td align="center">10</td></tr>
<tr><td align="center">1011</td><td align="center">B</td><td align="center">11</td></tr>
<tr><td align="center">1100</td><td align="center">C</td><td align="center">12</td></tr>
<tr><td align="center">1101</td><td align="center">D</td><td align="center">13</td></tr>
<tr><td align="center">1110</td><td align="center">E</td><td align="center">14</td></tr>
<tr><td align="center">1111</td><td align="center">F</td><td align="center">15</td></tr>
<tr><td align="center">10000</td><td align="center">10</td><td align="center">16</td></tr>
</tbody></table>
<h3><a class="header" href="#Формы-представления-чисел-в-двоичной-системе" id="Формы-представления-чисел-в-двоичной-системе">Формы представления чисел в двоичной системе</a></h3>
<h3><a class="header" href="#Математические-операции-над-числами-в-двоичной-системе" id="Математические-операции-над-числами-в-двоичной-системе">Математические операции над числами в двоичной системе</a></h3>
<h3><a class="header" href="#Шестнадцатеричная-система-счисления" id="Шестнадцатеричная-система-счисления">Шестнадцатеричная система счисления</a></h3>
<h3><a class="header" href="#Переводы-между-системами-счисления" id="Переводы-между-системами-счисления">Переводы между системами счисления</a></h3>
<p>, и правой отличается больше чем При этом, если мы записываем число больше 9, то &quot;вес&quot; левой цифры считается в 10 раз больше, веса правой цифры. Система счисления, в которую входит 10 цифр называется десятичной или системой по основанию 10. &quot;вес&quot; каждой следующей цифры числа (справа на лево) увеличивается в &quot;вес&quot; раз.</p>
<h3><a class="header" href="#Задачи" id="Задачи">Задачи</a></h3>
<ol>
<li>
<p>Перевести число из данной системы в две недостающие: шестнадцатеричную, десятичную, двоичную.</p>
<ol>
<li>11\( _{10} \)</li>
<li>127\( _{10} \);</li>
<li>451\( _{10} \);</li>
<li>11\( _{2} \);</li>
<li>10 1011\( _{2} \);</li>
<li>1101 1110\( _{2} \);</li>
<li>11\( _{16} \);</li>
<li>A1\( _{16} \);</li>
<li>1FE\( _{16} \);</li>
</ol>
</li>
<li>
<p>Перевести число между шестнадцатеричной и двоичной системами счисления</p>
<ol>
<li>0b001001011101;</li>
<li>0b110101011011;</li>
<li>0b11101010101011101101;</li>
<li>0b11110101100001010101011101101;</li>
<li>0x0A34;</li>
<li>0x12BF;</li>
<li>0x076A25;</li>
<li>0x9492BA2C;</li>
</ol>
</li>
</ol>
<p>Для дополнительной практики в переводе между системами счисления можно самостоятельно придумывать себе числа в любой из трех основных систем счисления и переводить числа в любую другую. Проверять полученные результаты можно с использованием встроенного в <strong>Windows calculator</strong> окна &quot;Программист&quot;.</p>
<ol start="3">
<li></li>
</ol>
<h3><a class="header" href="#Ответы-к-задачам" id="Ответы-к-задачам">Ответы к задачам</a></h3>
<p><strong>1.1</strong> - B\( _{16} \), 1011\( _{2} \); <strong>1.2</strong> -  7F\( _{16} \),  0111 1111\( _{2} \); <strong>1.3</strong> - 1C3\( _{16} \), 1 1100 0011\( _{2} \); <strong>1.4</strong> - 3\( _{16} \), 3\( _{10} \); <strong>1.5</strong> - 2B\( _{16} \), 43\( _{10} \); <strong>1.6</strong> - DE\( _{16} \), 222\( _{10} \); <strong>1.7</strong> - 17\( _{10} \), 1 0001\( _{2} \); <strong>1.8</strong> - 161\( _{10} \), 1010 0001\( _{2} \); <strong>1.9</strong> - 510\( _{10} \),  1 1111 1110\( _{2} \).</p>
<p><strong>2.1</strong> - 0x026D; <strong>2.2</strong> - 0x0D5B; <strong>2.3</strong> - 0x0EAAED;  <strong>2.4</strong> - 0x1EB0AAED; <strong>2.5</strong> - 0b101000110100; <strong>2.6</strong> - 0b1001010111111; <strong>2.7</strong> - 0b1110110101000100101; <strong>2.8</strong> - 0b10010100100100101011101000101100.</p>
<p><strong>3.1</strong> -</p>
<h1><a class="header" href="#Логические-операции-в-Си--" id="Логические-операции-в-Си--">Логические операции в Си (-)</a></h1>
<p>Дать понятие маски и показать пару примеров того, как эти маски могут использоваться.</p>
<h3><a class="header" href="#Логическое-И" id="Логическое-И">Логическое И:</a></h3>
<table><thead><tr><th align="center">\( X_{1} \)</th><th align="center">\( X_{2} \)</th><th align="center">\( Y \)</th></tr></thead><tbody>
<tr><td align="center">0</td><td align="center">0</td><td align="center"><strong>0</strong></td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center"><strong>0</strong></td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center"><strong>0</strong></td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center"><strong>1</strong></td></tr>
</tbody></table>
<h3><a class="header" href="#Логическое-ИЛИ" id="Логическое-ИЛИ">Логическое ИЛИ:</a></h3>
<table><thead><tr><th align="center">\( X_{1} \)</th><th align="center">\( X_{2} \)</th><th align="center">\( Y \)</th></tr></thead><tbody>
<tr><td align="center">0</td><td align="center">0</td><td align="center"><strong>0</strong></td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center"><strong>1</strong></td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center"><strong>1</strong></td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center"><strong>1</strong></td></tr>
</tbody></table>
<h3><a class="header" href="#Логическое-НЕ-" id="Логическое-НЕ-">Логическое НЕ :</a></h3>
<table><thead><tr><th align="center">\( X_{1} \)</th><th align="center">\( Y \)</th></tr></thead><tbody>
<tr><td align="center">0</td><td align="center"><strong>1</strong></td></tr>
<tr><td align="center">1</td><td align="center"><strong>0</strong></td></tr>
</tbody></table>
<h3><a class="header" href="#xor-или-разность-по-модулю-2-на-2-элемента" id="xor-или-разность-по-модулю-2-на-2-элемента">XOR или разность по модулю 2 на 2 элемента:</a></h3>
<table><thead><tr><th align="center">\( X_{1} \)</th><th align="center">\( X_{2} \)</th><th align="center">\( Y \)</th></tr></thead><tbody>
<tr><td align="center">0</td><td align="center">0</td><td align="center"><strong>0</strong></td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center"><strong>1</strong></td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center"><strong>1</strong></td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center"><strong>0</strong></td></tr>
</tbody></table>
<h3><a class="header" href="#xor-или-разность-по-модулю-2-на-3-элемента-проверка-на-нечетность" id="xor-или-разность-по-модулю-2-на-3-элемента-проверка-на-нечетность">XOR или разность по модулю 2 на 3 элемента (проверка на нечетность):</a></h3>
<table><thead><tr><th align="center">\( X_{1} \)</th><th align="center">\( X_{2} \)</th><th align="center">\( X_{3} \)</th><th align="center">\( Y \)</th></tr></thead><tbody>
<tr><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center"><strong>0</strong></td></tr>
<tr><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center"><strong>1</strong></td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center"><strong>1</strong></td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center"><strong>0</strong></td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center"><strong>1</strong></td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center"><strong>0</strong></td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center"><strong>0</strong></td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center"><strong>1</strong></td></tr>
</tbody></table>
<h1><a class="header" href="#Основы-макросов-в-Си--" id="Основы-макросов-в-Си--">Основы макросов в Си ( )</a></h1>
<h1><a class="header" href="#1-Порты-ввода-вывода-" id="1-Порты-ввода-вывода-">1. Порты ввода-вывода (.)</a></h1>
<h2><a class="header" href="#Теория" id="Теория">Теория</a></h2>
<h2><a class="header" href="#Задания" id="Задания">Задания</a></h2>
<h3><a class="header" href="#Базовые-задания" id="Базовые-задания">Базовые задания</a></h3>
<h3><a class="header" href="#Задания-повышенного-уровня-сложности" id="Задания-повышенного-уровня-сложности">Задания повышенного уровня сложности</a></h3>
<h2><a class="header" href="#Типовые-проблемы" id="Типовые-проблемы">Типовые проблемы</a></h2>
<ol>
<li>Микроконтроллер в общем случае программируется через ножки PA13 и PA14. Соответственно, если ваш код задевает настройку этих ножек, плата может перестать прошиваться. В этом нет ничего страшного. это можно исправить с использованием программы <a href="https://www.st.com/en/development-tools/stsw-link004.html">ST-link utility</a>, подключившись к плате <strong>&quot;under reset&quot;</strong> и полностью очистив память. Чтобы избежать этой ошибки в дальнейшем рекомендуется проверить, чтобы в настройке порта А не было операций &quot;=&quot;, а вместо них были операции &quot;|=&quot; и &quot;&amp;= ~&quot;.</li>
</ol>
<h2><a class="header" href="#Контрольные-вопросы" id="Контрольные-вопросы">Контрольные вопросы</a></h2>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
        
        

    </body>
</html>
